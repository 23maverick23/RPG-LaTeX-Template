\RequirePackage{graphicx}
\RequirePackage{dblfloatfix}
%\RequirePackage{stfloats}
\RequirePackage[strict]{changepage}

%\newcommand*{\rpgarttop}[1]{%
%    \begin{figure*}[!t]%
%    \begin{tikzpicture}[remember picture,overlay]
%        \node[inner sep=0pt, anchor=north] at (current page.north) {\includegraphics[width=\paperwidth]{#1}};
%    \end{tikzpicture}
%    %\rule{0pt}{\maxof{0pt}{image height}}%    
%  \end{figure*}%
%}
%
%\newcommand*{\rpgartbottom}[1]{%
%    \begin{figure*}[!t]%
%    \begin{tikzpicture}[remember picture,overlay]
%        \node[inner sep=0pt, anchor=south] at (current page.south) {\includegraphics[width=\paperwidth]{#1}};
%    \end{tikzpicture}
%  \end{figure*}%
%
%}

%\newcommand*{\rpgarttop}[1]{%
%    \begin{figure*}[htp!]%
%        \centering
%        \vspace{-43pt}
%        \hspace*{-\marginparwidth}
%        \includegraphics[width=\paperwidth+2pt]{#1}
%    %\rule{0pt}{\maxof{0pt}{50pt}}%    
%  \end{figure*}%
%}
%
%\newcommand*{\rpgartbottom}[1]{%
%    \begin{figure*}[hb!]%
%        \centering
%        %\vspace{-43pt}
%        \hspace*{-\marginparwidth}
%        \includegraphics[width=\paperwidth+2pt]{#1}
%  \end{figure*}%
%
%}


\newlength{\rpghmargin}
\newcommand*{\rpgart}[2]{%
    \checkoddpage
    \ifoddpage
        \setlength{\rpghmargin}{\dimexpr 1in+\hoffset+\oddsidemargin+4pt \relax}
    \else
        \setlength{\rpghmargin}{\dimexpr 1in+\hoffset+\evensidemargin+4pt \relax}

    \fi
    \begin{figure*}[#1!]
        \centering
        \if #1t
            \vspace*{-\dimexpr1in+\voffset+\topmargin+\headheight+\headsep \relax}
        \fi

         \makebox[\paperwidth+1pt][l]{
            \hskip-\rpghmargin \relax
            \includegraphics[width=\paperwidth+1pt]{#2}
        }
        \if #1b
            \vspace*{-\dimexpr\paperheight-\textheight-1in+13pt-\voffset-\topmargin-\headheight-\headsep\relax}
        \fi

    \end{figure*}
}
